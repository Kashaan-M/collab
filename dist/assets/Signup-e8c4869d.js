import{r as a,a as _,j as e,L as A}from"./index-3e17390d.js";import{N as R,B as S,M as k}from"./Btn-af5112b3.js";import{F}from"./Footer-ec8f36c7.js";import{A as v,I as l}from"./Alert-d9b93f88.js";import{a as E}from"./axios-71af5128.js";function D(){const[m,f]=a.useState(""),[p,x]=a.useState(""),[i,g]=a.useState(""),[u,b]=a.useState(""),o=a.useRef(null),c=a.useRef(null),d=a.useRef(null),h=a.useRef(null),t=a.useRef(null),y=_(),n="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:border-2 focus:border-blue-500 focus:bg-white";a.useEffect(()=>{t.current&&t.current.setAttribute("disabled",!0)},[]),a.useEffect(()=>{i.length>=7&&u.length>=7&&i===u?t.current.removeAttribute("disabled"):t.current.setAttribute("disabled",!0)},[i,u]);async function N(s){var w,j;s.preventDefault();try{const{data:r}=await E.post("/api/signup",{displayName:o.current.value,email:c.current.value,password:d.current.value});r.msg&&(x(r.msg),setTimeout(()=>{y("/sessions")},2e3))}catch(r){r.response.data.msg&&f((j=(w=r.response)==null?void 0:w.data)==null?void 0:j.msg),console.log("something went wrong")}finally{g(""),b(""),setTimeout(()=>{f(""),x("")},2e3)}}return e.jsxs(e.Fragment,{children:[e.jsx(R,{children:e.jsx(S,{text:"Sign up",href:"/users/new"})}),e.jsxs(k,{children:[m?e.jsx(v,{error:m}):p?e.jsx(v,{success:p}):null,e.jsxs("form",{onSubmit:async s=>await N(s),children:[e.jsx("div",{className:"w-full max-w-lg",children:e.jsxs("div",{className:"w-full px-3",children:[e.jsx("label",{className:"block uppercase tracking-wide text-gray-700 text-md font-bold mb-2",htmlFor:"user_display_name",children:"Display name"}),e.jsx(l,{ref:o,className:n,autoFocus:"autoFocus",type:"text",name:"displayName",id:"user_display_name",onChange:s=>o.current.setAttribute("value",s.target.value),required:!0})]})}),e.jsx("div",{className:"w-full max-w-lg",children:e.jsxs("div",{className:"w-full px-3",children:[e.jsx("label",{className:"block uppercase tracking-wide text-gray-700 text-md font-bold mb-2",htmlFor:"user_email",children:"Email"}),e.jsx(l,{ref:c,className:n,type:"email",name:"email",id:"user_email",onChange:s=>c.current.setAttribute("value",s.target.value),required:!0})]})}),e.jsx("div",{className:"w-full max-w-lg",children:e.jsxs("div",{className:"w-full px-3",children:[e.jsx("label",{className:"block uppercase tracking-wide text-gray-700 text-md font-bold mb-2",htmlFor:"user_password",children:"Password"}),e.jsx(l,{ref:d,className:n,minLength:"7",maxLength:"20",type:"password",name:"password",id:"user_password",onChange:s=>{d.current.setAttribute("value",s.target.value),g(s.target.value)},required:!0})]})}),e.jsx("div",{className:"w-full max-w-lg",children:e.jsxs("div",{className:"w-full px-3",children:[e.jsx("label",{className:"block uppercase tracking-wide text-gray-700 text-md font-bold mb-2",htmlFor:"user_password_confirmation",children:"Password confirmation"}),e.jsx(l,{ref:h,className:n,minLength:"7",maxLength:"20",type:"password",name:"user[password_confirmation]",id:"user_password_confirmation",onChange:s=>{h.current.setAttribute("value",s.target.value),b(s.target.value)},required:!0})]})}),e.jsx("div",{className:"w-full max-w-lg",children:e.jsx("div",{className:"w-full px-3",children:e.jsx(l,{ref:t,type:"submit",name:"commit",value:"Sign up",className:"bg-blue-500 disabled:bg-slate-300 disabled:text-gray-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"})})})]}),e.jsxs("h3",{className:"my-[30px]",children:["Already a memeber?Â ",e.jsx(A,{to:"/sessions",href:"/sessions",children:e.jsx("span",{className:"font-lg underline",children:"Sign in "})})]})]}),e.jsx(F,{})]})}export{D as default};

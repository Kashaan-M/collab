import{r as m,j as s,u as w,a as b,L as v}from"./index-bb4b37b7.js";import{N as y,B as p,M as j}from"./Btn-d8090584.js";import{F as k}from"./Footer-e9b0988b.js";import{p as c}from"./profile_placeholder-4c6a012f.js";import{m as C}from"./msg-16a197a4.js";import{h as L}from"./joins-a642188f.js";import{a as r}from"./axios-71af5128.js";const R="/assets/chev-96205b2f.svg",M=m.forwardRef(function(i,d){return s.jsx("div",{className:"w-100 flex justify-center",children:s.jsx("button",{className:"px-4 py-2 bg-teal-500 font-bold shadow-md shadow-teal-900",ref:d,...i,children:"Load More"})})}),S=M;function $(){const{projects:l,setProjects:i,isSignedIn:d,setProj:h,agly:o,setAgly:f}=w(),u=b(),g=m.useRef();m.useEffect(()=>{async function e(){try{const{data:a}=await r.get("/api/projects");a.msg&&i([...l,...a.data])}catch{console.log("something went wrong")}}e()},[]);async function N(e){try{const{data:a}=await r.post("/api/projects/more",{agly:o});a.msg&&(i([...l,...a.data]),f(o+1))}catch{console.log("something went wrong")}}return s.jsxs(s.Fragment,{children:[s.jsxs(y,{children:[s.jsx(p,{text:d?"New Project":"Sign up",href:"/users/new"}),s.jsx(v,{to:"/dashboard",children:s.jsx("img",{className:"w-[40px] h-[40px] rounded-full inline",src:c})})]}),s.jsxs(j,{children:[s.jsx("div",{className:"grid grid-cols-1 py-10 mx-auto",children:l&&l.map(e=>{var x;const a=encodeURI(`/projects/${e.title}`);async function t(n){n.preventDefault(),h(e.id),u(a)}return s.jsxs("div",{className:"max-w-lg rounded overflow-hidden shadow-lg my-8 mx-auto py-4",children:[s.jsxs("div",{className:"flex flex-row justify-between",children:[s.jsx("div",{className:"px-6 pt-2 mb-[0px]",children:s.jsx("span",{className:"text-slate-500 text-sm font-thin",children:new Date(e==null?void 0:e.createdAt).toLocaleString()})}),s.jsx("div",{className:"px-6 pt-2 mb-[0px]",children:s.jsxs("span",{className:"text-slate-500 text-sm font-thin",children:["@",(x=e==null?void 0:e.user)==null?void 0:x.displayName]})})]}),s.jsxs("div",{className:"px-6 py-4",children:[s.jsxs("div",{className:"font-bold text-xl mb-2 flex",children:[s.jsx("img",{className:"w-10 h-10 mr-5 rounded-full",src:c}),s.jsxs("div",{className:"font-bold text-xl mb-2 flex-col",children:[s.jsx("button",{onClick:async n=>await t(n),children:e==null?void 0:e.title}),s.jsxs("p",{className:"text-sm text-gray-500",children:[s.jsx("span",{children:e==null?void 0:e.myRole}),s.jsx("span",{children:" looking for "}),s.jsx("span",{className:"underline",children:e==null?void 0:e.otherRole})]})]})]}),s.jsx("p",{className:"text-gray-700 text-base pt-10",children:e==null?void 0:e.description})]}),s.jsxs("div",{className:"px-6 pb-2 flex justify-between",children:[s.jsxs("div",{className:"inline",children:[s.jsx("div",{className:"inline",children:s.jsxs("button",{onClick:async n=>await t(n),children:[(e==null?void 0:e.comments.length)!=0?e.comments.length:0,s.jsx("img",{className:"inline w-[25px] h-[25px]",alt:"Number of comments",src:C})]})}),s.jsx("div",{className:"inline ml-[10px]",children:s.jsxs("button",{onClick:async n=>await t(n),children:["0"," ",s.jsx("img",{className:"inline w-[25px] h-[25px]",alt:"Number of people who applied to join",src:L})]})})]}),s.jsx("div",{className:"inline",children:s.jsxs("button",{onClick:async n=>await t(n),children:[s.jsx("span",{className:"text-blue-500 hover:text-blue-800",children:"See more"}),s.jsx("img",{className:"inline",src:R})]})})]})]},e.id)})}),s.jsx(S,{ref:g,onClick:N})]}),s.jsx(k,{})]})}export{$ as default};
